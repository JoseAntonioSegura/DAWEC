<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Botón e Iframe</title>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Obtén el botón principal
            const mainButton = document.getElementById('mainButton');
            
            // Agrega un evento 'click' al botón principal
            mainButton.addEventListener('click', function () {
                // Accede al iframe
                const iframe = document.getElementById('myIframe');
                
                // Accede al documento dentro del iframe
                const iframeDocument = iframe.contentDocument || iframe.contentWindow.document;

                // Obtén el botón dentro del iframe
                const iframeButton = iframeDocument.getElementById('iframeButton');

                // Genera el XPath del botón dentro del iframe
                const xpath = getXPath(iframeButton);

                // Muestra el XPath en un cuadro de alerta
                alert("XPath del botón dentro del iframe clickeado:\n\n" + xpath);
            });
        });

        function getXPath(element) {
            if (element.id !== "") {
                // Si el elemento tiene un ID, se puede usar directamente en el XPath
                return `id("${element.id}")`;
            }

            const idx = (sibling) => [].indexOf.call(sibling.parentNode.children, sibling) + 1;
            const segs = [];
            for (; element && element.nodeType == 1; element = element.parentNode) {
                if (element.hasAttribute('id')) {
                    segs.unshift(`id("${element.getAttribute('id')}")`);
                    break;
                } else if (element.parentNode) {
                    segs.unshift(`${element.localName.toLowerCase()}[${idx(element)}]`);
                } else {
                    segs.unshift(element.localName.toLowerCase());
                }
            }
            return segs.join('/');
        }
    </script>
</head>
<body>
    <button id="mainButton">Botón Principal</button>
    
    <iframe id="myIframe" width="200" height="200" frameborder="0" srcdoc="<!DOCTYPE html>
    <html lang='en'>
    <head>
        <meta charset='UTF-8'>
        <meta name='viewport' content='width=device-width, initial-scale=1.0'>
        <title>Contenido Iframe</title>
    </head>
    <body>
        <button id='iframeButton'>Botón Iframe</button>
    </body>
    </html>">
    </iframe>
</body>
</html>
